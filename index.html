<!DOCTYPE html>
<html lang="en">
    <main>
        <meta charset="UTF-8">
        <title>Rocks, Papers, Scissors </title> 
    </main>
    <body>
        <script>
            // Declaring variables 
            let playerScore = 0;
            let computerScore = 0;
            let roundsPlayed = 0;
            // Computer Chooses Rock Paper or Scissors
            function computerPlay() {
                let randomInt = (Math.floor(Math.random() * 3) +1);
                if(randomInt === 1) {
                    return("rock");
                } else if (randomInt === 2) {
                    return("paper");
                } else if (randomInt === 3) {
                    return("scissors");
                } 
            }
            // Starts the first 5-round game
            game(); 

            // Determine the winner of the round
            function playRound(playerSelection, computerSelection) {
                if ((playerSelection === "rock") && (computerSelection === "scissors")) {
                console.log(`You win! ${playerSelection} beats ${computerSelection}!`);
                playerScore++;
                roundsPlayed++;
            } else if ((playerSelection === "paper") && (computerSelection === "rock")) {
                console.log(`You win! ${playerSelection} beats ${computerSelection}!`);
                playerScore++;
                roundsPlayed++;
            } else if ((playerSelection === "scissors") && (computerSelection === "paper")) {
                console.log(`You win! ${playerSelection} beats ${computerSelection}!`);
                playerScore++;
                roundsPlayed++;
            } else if ((playerSelection === "rock") && (computerSelection === "paper")) {
                console.log(`You Lose! ${computerSelection} beats ${playerSelection}!`);
                computerScore++;
                roundsPlayed++;
            } else if ((playerSelection === "paper") && (computerSelection === "scissors")) {
                console.log(`You Lose! ${computerSelection} beats ${playerSelection}!`);
                computerScore++;
                roundsPlayed++;
            } else if ((playerSelection === "scissors") && (computerSelection === "rock")) {
                console.log(`You Lose! ${computerSelection} beats ${playerSelection}!`);
                computerScore++; 
                roundsPlayed++;
            } else if (playerSelection === computerSelection) {
                console.log("It's a Tie!");
                roundsPlayed++;
            } else {
                // If Invalid Selection -> replays the round until Valid Selection
                alert("Invalid Selection: Press OK to try again");
                let promptAnswer = prompt("Rock, Paper or Scissors?")
                let playerSelection = promptAnswer.toLowerCase();
                let computerSelection = computerPlay();
                return playRound(playerSelection, computerSelection);

            }
            }

            // play 5 rounds
            function game() {
                for (let i = 0; i < 5; i++) {
                    let promptAnswer = prompt("Rock, Paper or Scissors?");
                    let playerSelection = promptAnswer.toLowerCase();
                    let computerSelection = computerPlay();
                    console.log(playRound(playerSelection, computerSelection));
                    if ((playerScore > computerScore) && (roundsPlayed == 5)) {
                        alert(`You Won! The score was ${playerScore} to ${computerScore}`);
                        replay(); 
                    } else if (playerScore < computerScore && (roundsPlayed == 5)) {
                        alert(`You Lost! The score was ${computerScore} to ${playerScore}`);
                        replay(); 
                    } else  if (playerScore == computerScore && (roundsPlayed == 5)) {
                        alert("It's a Tie!");
                        replay();  
                    } 
                                    
                }
            }
            // Replay function
            function replay() {
                let replayQuestion = prompt("Would you like to play again?");
            let replayAnswer = replayQuestion.toLowerCase();
            if (replayAnswer === "yes") {
                roundsPlayed = 0;
                playerScore = 0;
                computerScore = 0;
                game();
            } else  {
                alert("Thanks for playing!");
            }
            }
        </script>
    </body>
</html>